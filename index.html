<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>苏弋的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="This is Hao Jiacheng&#39;s personal blog">
<meta property="og:type" content="website">
<meta property="og:title" content="苏弋的博客">
<meta property="og:url" content="https://suyiharris.github.io/index.html">
<meta property="og:site_name" content="苏弋的博客">
<meta property="og:description" content="This is Hao Jiacheng&#39;s personal blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="SuYi">
<meta property="article:tag" content="SuYi, Blog, Harris">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="苏弋的博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">苏弋的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">There is no one around me who is you, but there is no one who is not you.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://suyiharris.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-2023-11-2-Virbox代码加密" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/11/02/2023-11-2-Virbox%E4%BB%A3%E7%A0%81%E5%8A%A0%E5%AF%86/" class="article-date">
  <time class="dt-published" datetime="2023-11-02T04:12:12.000Z" itemprop="datePublished">2023-11-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/11/02/2023-11-2-Virbox%E4%BB%A3%E7%A0%81%E5%8A%A0%E5%AF%86/">-Virbox代码加密</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Virbox-文档"><a href="#Virbox-文档" class="headerlink" title="Virbox 文档"></a>Virbox 文档</h1><h2 id="一、SDK"><a href="#一、SDK" class="headerlink" title="一、SDK"></a>一、SDK</h2><h3 id="1-1注册-Virbox开发者账号"><a href="#1-1注册-Virbox开发者账号" class="headerlink" title="1.1注册 Virbox开发者账号"></a>1.1注册 Virbox开发者账号</h3><p>注册地址：<a target="_blank" rel="noopener" href="https://developer.lm.virbox.com/reg.html">https://developer.lm.virbox.com/reg.html</a></p>
<h3 id="1-2申请转正（成为开发者）"><a href="#1-2申请转正（成为开发者）" class="headerlink" title="1.2申请转正（成为开发者）"></a>1.2申请转正（成为开发者）</h3><p><img src="https://pic.imgdb.cn/item/65436a91c458853aef7f40f7.jpg"></p>
<h3 id="1-3下载开发者工具盒"><a href="#1-3下载开发者工具盒" class="headerlink" title="1.3下载开发者工具盒"></a>1.3下载开发者工具盒</h3><p>在【概览】页面-【工具资料】模块，点击【开发者工具盒】即可下载Virbox开发者工具盒 </p>
<p><img src="https://pic.imgdb.cn/item/65436abac458853aef7f9a81.jpg"></p>
<p> 安装工具盒并登录 </p>
<p><img src="https://pic.imgdb.cn/item/65436adcc458853aef7fe133.jpg"></p>
<p>点击【下载SDK】，检测后【立即更新】 </p>
<p><img src="https://pic.imgdb.cn/item/65436af2c458853aef800e40.jpg"></p>
<p><img src="https://pic.imgdb.cn/item/65436b00c458853aef802bb1.jpg"></p>
<h2 id="二、许可发布流程"><a href="#二、许可发布流程" class="headerlink" title="二、许可发布流程"></a>二、许可发布流程</h2><h3 id="2-1创建产品"><a href="#2-1创建产品" class="headerlink" title="2.1创建产品"></a>2.1创建产品</h3><p><img src="https://pic.imgdb.cn/item/65436b23c458853aef80742e.jpg"></p>
<h3 id="2-2创建授权码模板"><a href="#2-2创建授权码模板" class="headerlink" title="2.2创建授权码模板"></a>2.2创建授权码模板</h3><p><img src="https://files.mdnice.com/user/15599/0759182a-307b-47f9-af0c-ba8296fa044b.png"></p>
<p><img src="https://pic.imgdb.cn/item/65436b79c458853aef8123b9.jpg"> </p>
<p><img src="https://pic.imgdb.cn/item/65436b8ac458853aef814808.jpg"> </p>
<p><strong>带红色星号的都是必填</strong></p>
<h3 id="2-3生成授权码（发布许可）"><a href="#2-3生成授权码（发布许可）" class="headerlink" title="2.3生成授权码（发布许可）"></a>2.3生成授权码（发布许可）</h3><h4 id="2-3-1发布许可"><a href="#2-3-1发布许可" class="headerlink" title="2.3.1发布许可"></a>2.3.1发布许可</h4><p><img src="https://pic.imgdb.cn/item/65436bb3c458853aef819946.jpg"> </p>
<h4 id="2-3-2填写"><a href="#2-3-2填写" class="headerlink" title="2.3.2填写"></a>2.3.2填写</h4><p><img src="https://pic.imgdb.cn/item/65436bc4c458853aef81c14e.jpg"> </p>
<h4 id="2-3-3生成完毕"><a href="#2-3-3生成完毕" class="headerlink" title="2.3.3生成完毕"></a>2.3.3生成完毕</h4><p><img src="https://pic.imgdb.cn/item/65436bd4c458853aef81e5fb.jpg"> </p>
<h2 id="三、软件加密（jar包加密）"><a href="#三、软件加密（jar包加密）" class="headerlink" title="三、软件加密（jar包加密）"></a>三、软件加密（jar包加密）</h2><h3 id="3-1打开加壳工具"><a href="#3-1打开加壳工具" class="headerlink" title="3.1打开加壳工具"></a>3.1打开加壳工具</h3><p><img src="https://pic.imgdb.cn/item/65436c37c458853aef82aa2d.jpg"></p>
<p>jar包放入新建的一个文件夹中</p>
<p><img src="https://pic.imgdb.cn/item/65436c22c458853aef82811d.jpg"></p>
<h3 id="3-2登录开发锁，填API密码"><a href="#3-2登录开发锁，填API密码" class="headerlink" title="3.2登录开发锁，填API密码"></a>3.2登录开发锁，填API密码</h3><p><img src="https://pic.imgdb.cn/item/65436bf9c458853aef822e43.jpg"></p>
<p>API密码在</p>
<p><img src="https://pic.imgdb.cn/item/65436c50c458853aef82da73.jpg"></p>
<p>下拉即可看到</p>
<p><img src="https://pic.imgdb.cn/item/65436c64c458853aef8301c0.jpg"></p>
<h3 id="3-3拖入jar包文件夹，填写许可选项"><a href="#3-3拖入jar包文件夹，填写许可选项" class="headerlink" title="3.3拖入jar包文件夹，填写许可选项"></a>3.3拖入jar包文件夹，填写许可选项</h3><p><img src="https://pic.imgdb.cn/item/65436c6fc458853aef8318d3.jpg"></p>
<p><strong>填写java密码：</strong></p>
<ul>
<li>密码如果不设置，会随机默认密码。</li>
<li>建议设置一个密码，并牢记，后续更新jar包时，重新加密时填写此密码，则无需更换配置sjt库。</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/65436c7cc458853aef83345d.jpg"></p>
<h3 id="3-4消息提示选项"><a href="#3-4消息提示选项" class="headerlink" title="3.4消息提示选项"></a>3.4消息提示选项</h3><p>当程序被加密后，程序就与我们之前创建的许可进行关联，当用户在使用我们的加密的程序时如果触发了一些限制时，会以该界面上的消息进行显示 </p>
<p><img src="https://pic.imgdb.cn/item/65436cb1c458853aef839e3d.jpg"></p>
<h3 id="3-5完成保护"><a href="#3-5完成保护" class="headerlink" title="3.5完成保护"></a>3.5完成保护</h3><p>配置好信息后，选中项目，点击“保护选中项目”，进行加密</p>
<p><img src="https://pic.imgdb.cn/item/65436cc3c458853aef83c3a6.jpg"></p>
<p>生成一个文件夹和加密配置文件</p>
<p><img src="https://pic.imgdb.cn/item/65436cd0c458853aef83dda2.jpg"></p>
<p>文件夹中：加密后的jar包和sjt_agent.jar文件</p>
<p><img src="https://pic.imgdb.cn/item/65436ce0c458853aef83fd0a.jpg"></p>
<h2 id="四、使用加密后的程序"><a href="#四、使用加密后的程序" class="headerlink" title="四、使用加密后的程序"></a>四、使用加密后的程序</h2><h3 id="4-1安装用户工具"><a href="#4-1安装用户工具" class="headerlink" title="4.1安装用户工具"></a>4.1安装用户工具</h3><p>运行加密后的软件是需要先运行Virbox用户工具 </p>
<p>Virbox用户工具下载链接：<a target="_blank" rel="noopener" href="https://lm.virbox.com/tools.html">https://lm.virbox.com/tools.html</a> </p>
<h4 id="windows环境"><a href="#windows环境" class="headerlink" title="windows环境"></a>windows环境</h4><p>直接双击安装</p>
<h4 id="Linux环境"><a href="#Linux环境" class="headerlink" title="Linux环境"></a>Linux环境</h4><ul>
<li>rpm安装：<code>rpm -ivh senseshield-2.5.0.60698-1.x86_64.rpm</code></li>
<li>deb安装：<code>dpkg -i senseshield-2.5.0.60698-i386.deb</code></li>
<li>服务启动查看：<code>service senseshield status</code> 或者 <code>systemctl status senseshield</code></li>
</ul>
<h3 id="4-2绑定授权码"><a href="#4-2绑定授权码" class="headerlink" title="4.2绑定授权码"></a>4.2绑定授权码</h3><h4 id="windows环境-1"><a href="#windows环境-1" class="headerlink" title="windows环境"></a>windows环境</h4><p>打开Virbox 用户工具，点击【云&#x2F;软锁】—【本地软锁】—【授权码在线激活】，会打开授权码激活页面，将生成的授权码输入，点击激活即可。 </p>
<p><img src="https://pic.imgdb.cn/item/65436cfec458853aef843d27.jpg"></p>
<p>粘贴授权码并点击激活</p>
<p><img src="https://pic.imgdb.cn/item/65436d0dc458853aef845c9e.jpg"> </p>
<h4 id="Linux环境-1"><a href="#Linux环境-1" class="headerlink" title="Linux环境"></a>Linux环境</h4><h5 id="1-联网环境下打开终端"><a href="#1-联网环境下打开终端" class="headerlink" title="1.联网环境下打开终端"></a>1.联网环境下打开终端</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//例:ssclt --online_bind_license_key --license_key 26W7-4ZTP-38YP-JRX1</span><br><span class="line">ssclt --online_bind_license_key --license_key [授权码]</span><br></pre></td></tr></table></figure>

<p>激活成功会有success的字样</p>
<h5 id="2-使用ssclt-slock查看已绑定的软锁许可"><a href="#2-使用ssclt-slock查看已绑定的软锁许可" class="headerlink" title="2.使用ssclt --slock查看已绑定的软锁许可"></a>2.使用<code>ssclt --slock</code>查看已绑定的软锁许可</h5><p><img src="https://pic.imgdb.cn/item/65436d1fc458853aef8481de.jpg"></p>
<h3 id="4-3运行jar包"><a href="#4-3运行jar包" class="headerlink" title="4.3运行jar包"></a>4.3运行jar包</h3><h4 id="windows系统"><a href="#windows系统" class="headerlink" title="windows系统"></a>windows系统</h4><p>1.把<code>slm_runtime_java.dll</code>文件复制或移动到jdk17的bin目录下</p>
<p><img src="https://pic.imgdb.cn/item/65436d37c458853aef84b22d.jpg"></p>
<p>2.运行方式：运行 jar 包时指定 sjt 文件目录</p>
<ul>
<li><p>若 sjt_agent.jar 和 jar 包在同一目录，进入到jar包的当前目录下，直接执行</p>
<p>命令：<code>java -javaagent:sjt_agent.jar -jar ***.jar</code></p>
</li>
<li><p>若 sjt_agent.jar 和 jar包 不在同一目录，需要指定文件的全目录。</p>
<p>命令：<code>java -javaagent:C:\Users\test\Desktop\sjt\sjt_agent.jar -jar ***.jar</code></p>
</li>
</ul>
<h4 id="Linux-系统"><a href="#Linux-系统" class="headerlink" title="Linux 系统"></a>Linux 系统</h4><h5 id="1-下列文件需要上传到服务器新建的目录下"><a href="#1-下列文件需要上传到服务器新建的目录下" class="headerlink" title="1.下列文件需要上传到服务器新建的目录下"></a>1.下列文件需要上传到服务器<strong>新建的目录</strong>下</h5><p>目录lib下的文件是<code>libslm_runtime_java.so</code></p>
<p><img src="https://pic.imgdb.cn/item/65436d42c458853aef84c71d.jpg"></p>
<h5 id="2-解压jdk-17-linux-x64-bin-tar-gz文件"><a href="#2-解压jdk-17-linux-x64-bin-tar-gz文件" class="headerlink" title="2.解压jdk-17_linux-x64_bin.tar.gz文件"></a>2.解压jdk-17_linux-x64_bin.tar.gz文件</h5><p>使用解压命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-17_linux-x64_bin.tar.gz</span><br></pre></td></tr></table></figure>

<p>或直接执行<code>jieya.sh</code>文件解压jdk</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./jieya.sh</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.imgdb.cn/item/65436d4ec458853aef84e212.jpg"></p>
<p><img src="https://pic.imgdb.cn/item/65436d6ac458853aef851b11.jpg"></p>
<h5 id="3-执行start-sh文件"><a href="#3-执行start-sh文件" class="headerlink" title="3.执行start.sh文件"></a>3.执行start.sh文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./sstart.sh</span><br></pre></td></tr></table></figure>

<p>文件内容如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=./jdk-17.0.9</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:./lib</span><br><span class="line">java -javaagent:sjt_agent.jar -jar udyk-2.1.jar </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="方式二："><a href="#方式二：" class="headerlink" title="方式二："></a>方式二：</h5><p>或是直接在终端运行jiance.sh，此脚本会自动检测当前系统是否安装了宝塔面板、检测用户工具是否已安装、检测运行项目所需要的服务是否已经启动、检测服务全部启动后帮助用户激活授权码以及检测jdk是否已解压，一些就绪后，将会执行start.sh脚本启动项目。</p>
<p><img src="https://pic.imgdb.cn/item/65436d8ec458853aef856774.jpg" alt="服务器shell脚本运行成功一切正常的情况下"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查是否已经安装了宝塔面板</span></span><br><span class="line"><span class="comment">#系统类型 默认0  Ubuntu：1      Deepin：2       Centos：3</span></span><br><span class="line">system_type=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ps aux | grep bt | grep -v grep &gt; /dev/null ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;宝塔面板已安装&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;宝塔面板未安装，马上执行安装！&quot;</span></span><br><span class="line">    <span class="comment"># 检测是什么系统，安装宝塔面板</span></span><br><span class="line">    <span class="keyword">if</span> [[ $(<span class="built_in">uname</span> -s) == <span class="string">&quot;Linux&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> [[ -f /etc/lsb-release &amp;&amp; $(grep DISTRIB_ID= /etc/lsb-release | <span class="built_in">cut</span> -d= -f2) == <span class="string">&quot;Ubuntu&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;是Ubuntu，安装Ubuntu的宝塔面板&quot;</span></span><br><span class="line">            system_type=1</span><br><span class="line">            <span class="comment">#wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh</span></span><br><span class="line">        <span class="keyword">elif</span> [[ -f /etc/os-release &amp;&amp; $(grep <span class="string">&#x27;^ID=&#x27;</span> /etc/os-release | <span class="built_in">cut</span> -d= -f2 | sed <span class="string">&#x27;s/&quot;//g&#x27;</span>) == <span class="string">&quot;deepin&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;是Deepin，安装Deepin的宝塔面板&quot;</span></span><br><span class="line">            system_type=2</span><br><span class="line">            <span class="comment">#wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh</span></span><br><span class="line">        <span class="keyword">elif</span> [[ -f /etc/redhat-release &amp;&amp; $(<span class="built_in">cat</span> /etc/redhat-release | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>) == <span class="string">&quot;CentOS&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;是centos，安装Centos的宝塔面板&quot;</span></span><br><span class="line">            <span class="comment">#yum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh</span></span><br><span class="line">            system_type=3</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检测是否安装了virbox用户工具</span></span><br><span class="line"><span class="keyword">if</span> ps aux | grep senseshield | grep -v grep &gt; /dev/null ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;用户工具已安装&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;用户工具未安装&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [[ $(<span class="built_in">uname</span> -s) == <span class="string">&quot;Linux&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> [[ -f /etc/lsb-release &amp;&amp; $(grep DISTRIB_ID= /etc/lsb-release | <span class="built_in">cut</span> -d= -f2) == <span class="string">&quot;Ubuntu&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            system_type=1</span><br><span class="line">        <span class="keyword">elif</span> [[ -f /etc/os-release &amp;&amp; $(grep <span class="string">&#x27;^ID=&#x27;</span> /etc/os-release | <span class="built_in">cut</span> -d= -f2 | sed <span class="string">&#x27;s/&quot;//g&#x27;</span>) == <span class="string">&quot;deepin&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            system_type=2</span><br><span class="line">        <span class="keyword">elif</span> [[ -f /etc/redhat-release &amp;&amp; $(<span class="built_in">cat</span> /etc/redhat-release | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>) == <span class="string">&quot;CentOS&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            system_type=3</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装virbox用户工具</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$system_type</span> == <span class="string">&quot;1&quot;</span> || <span class="variable">$system_type</span> == <span class="string">&quot;2&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;安装virbox用户工具---Ubuntu/Deepin&quot;</span></span><br><span class="line">    <span class="comment">#dpkg -i senseshield-2.5.0.60698-i386.deb</span></span><br><span class="line"><span class="keyword">elif</span> [[ <span class="variable">$system_type</span> == <span class="string">&quot;3&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;安装virbox用户工具---Centos&quot;</span></span><br><span class="line">    <span class="comment">#rpm -ivh senseshield-2.5.0.60698-1.x86_64.rpm</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查服务是否启动</span></span><br><span class="line">services=(<span class="string">&quot;nginx&quot;</span> <span class="string">&quot;mysql&quot;</span> <span class="string">&quot;redis&quot;</span> <span class="string">&quot;senseshield&quot;</span>)</span><br><span class="line">started_services=0      <span class="comment"># 记录已启动的服务数量</span></span><br><span class="line"><span class="keyword">for</span> service <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;services[@]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> pgrep <span class="string">&quot;<span class="variable">$service</span>&quot;</span> &gt;/dev/null</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$service</span> 服务已经启动&quot;</span></span><br><span class="line">        started_services=$((started_services+<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$service</span> 服务未启动&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$started_services</span> -eq <span class="variable">$&#123;#services[@]&#125;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;依赖服务全部已启动&quot;</span></span><br><span class="line">    <span class="comment"># 服务全部启动后，进行用户工具的激活授权码操作</span></span><br><span class="line">    <span class="keyword">while</span> ! [[ <span class="variable">$license_key</span> =~ ^[0-9A-Z]&#123;4&#125;-[0-9A-Z]&#123;4&#125;-[0-9A-Z]&#123;4&#125;-[0-9A-Z]&#123;4&#125;$ ]]; <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;请输入授权码（格式：XXXX-XXXX-XXXX-XXXX）：&quot;</span></span><br><span class="line">         <span class="comment"># 读取用户输入,并校验</span></span><br><span class="line">        <span class="built_in">read</span> license_key</span><br><span class="line">        <span class="keyword">if</span> ! [[ <span class="variable">$license_key</span> =~ ^[0-9A-Z]&#123;4&#125;-[0-9A-Z]&#123;4&#125;-[0-9A-Z]&#123;4&#125;-[0-9A-Z]&#123;4&#125;$ ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;授权码格式不正确&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;激活完毕，即将运行……&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;查看目录&quot;</span></span><br><span class="line">    <span class="built_in">ls</span></span><br><span class="line">    <span class="keyword">if</span> [ -d jdk-17.0.9 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;jdk-17.0.9 目录存在&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;运行jar包……&quot;</span></span><br><span class="line">        ./start.sh</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;jdk-17.0.9 目录不存在&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;解压jdk……&quot;</span></span><br><span class="line">        ./jieya.sh</span><br><span class="line">        ./start.sh</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="五、获取授权码中的数据区"><a href="#五、获取授权码中的数据区" class="headerlink" title="五、获取授权码中的数据区"></a>五、获取授权码中的数据区</h2><h3 id="5-1前提是在产品管理中创建产品的时候，填写上数据区的内容"><a href="#5-1前提是在产品管理中创建产品的时候，填写上数据区的内容" class="headerlink" title="5.1前提是在产品管理中创建产品的时候，填写上数据区的内容"></a>5.1前提是在产品管理中创建产品的时候，填写上数据区的内容</h3><p><img src="https://pic.imgdb.cn/item/65436dacc458853aef85a468.jpg"></p>
<h3 id="5-2创建授权码模板时勾选上数据区的内容"><a href="#5-2创建授权码模板时勾选上数据区的内容" class="headerlink" title="5.2创建授权码模板时勾选上数据区的内容"></a>5.2创建授权码模板时勾选上数据区的内容</h3><p><img src="https://pic.imgdb.cn/item/65436db9c458853aef85cadc.jpg"></p>
<h3 id="5-3在代码中整理好示例"><a href="#5-3在代码中整理好示例" class="headerlink" title="5.3在代码中整理好示例"></a>5.3在代码中整理好示例</h3><ul>
<li><p>此处的三个文件在</p>
<p>【D:\Virbox\senseshield\sdk\API\Java\Sample\SlmRuntimeJava】目录下</p>
</li>
</ul>
<p><img src="https://pic.imgdb.cn/item/65436de1c458853aef8646bd.jpg"></p>
<ul>
<li><p><strong>或者</strong>：此处也可以使用导入jar包的方式使用Sample示例</p>
<p>jar包在【D:\Virbox\senseshield\sdk\API\Java\Sample\SlmRuntimeJava】目录下</p>
<p><img src="https://pic.imgdb.cn/item/65436e04c458853aef868de1.jpg"></p>
<p>在pom.xml中定义</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.udeve<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SlmRuntimeJava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;project.basedir&#125;/src/main/resources/lib/SlmRuntimeJava.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-4更改API密码和许可ID"><a href="#5-4更改API密码和许可ID" class="headerlink" title="5.4更改API密码和许可ID"></a>5.4更改API密码和许可ID</h3><p><img src="https://pic.imgdb.cn/item/65436e13c458853aef86ae8e.jpg"></p>
<h3 id="5-5注释掉用不到的代码，防止报错"><a href="#5-5注释掉用不到的代码，防止报错" class="headerlink" title="5.5注释掉用不到的代码，防止报错"></a>5.5注释掉用不到的代码，防止报错</h3><p><img src="https://pic.imgdb.cn/item/65436e21c458853aef86cf0a.jpg"></p>
<h3 id="5-6把DLL文件复制一份到jdk的bin中"><a href="#5-6把DLL文件复制一份到jdk的bin中" class="headerlink" title="5.6把DLL文件复制一份到jdk的bin中"></a>5.6把DLL文件复制一份到jdk的bin中</h3><p>把<code>D:\Virbox\senseshield\sdk\API\Java\dll\x64</code>下的<code>slm_runtime_java.dll</code>文件，挪到<code>D:\Java\jdk-17\bin</code>下</p>
<h3 id="5-7测试、运行代码"><a href="#5-7测试、运行代码" class="headerlink" title="5.7测试、运行代码"></a>5.7测试、运行代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Sample.Virbox(<span class="number">7764</span>);</span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">object</span> <span class="operator">=</span> Sample.DataObject;</span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">userData</span> <span class="operator">=</span> object.getJSONObject(<span class="string">&quot;userData&quot;</span>);</span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">pubData</span> <span class="operator">=</span> object.getJSONObject(<span class="string">&quot;pubData&quot;</span>);</span><br><span class="line">    System.out.println(userData);</span><br><span class="line">    System.out.println(pubData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-8输出"><a href="#5-8输出" class="headerlink" title="5.8输出"></a>5.8输出</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">slm_get_developer_id success !</span><br><span class="line">developerId = 0300000000000009</span><br><span class="line">slm_init success!</span><br><span class="line">slm_login success!</span><br><span class="line">slm_keep_alive success!</span><br><span class="line">slm_find_license success !</span><br><span class="line">license_desc = [&#123;<span class="string">&quot;developer_id&quot;</span>:<span class="string">&quot;0300000000000009&quot;</span>,<span class="string">&quot;lm&quot;</span>:<span class="string">&quot;pub&quot;</span>,<span class="string">&quot;account_name&quot;</span>:<span class="string">&quot;SC1895000000003&quot;</span>,<span class="string">&quot;user_guid&quot;</span>:<span class="string">&quot;71fbab6f28854962a52816bcb3a6e5b6&quot;</span>,<span class="string">&quot;host_name&quot;</span>:<span class="string">&quot;DESKTOP-HO61AG6&quot;</span>,<span class="string">&quot;ip&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;port&quot;</span>:0,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;slock&quot;</span>&#125;]</span><br><span class="line">slm_check_module failure : 0x13000037!  License module not exist.</span><br><span class="line">slm_get_info failure : 0x00000010!  Unsupported operation.</span><br><span class="line">slm_user_data_getsize success! pmemSize = 103</span><br><span class="line">slm_user_data_read success! </span><br><span class="line">readBuff = CUSTOM_COPYRIGHT:no;HOUSE_MAX_COUNT:10;OPEN_API:no;POST_MAX_COUNT:1;TOUR_MAX_COUNT:1;USER_MAX_COUNT:100</span><br><span class="line">slm_user_data_write before size = 0</span><br><span class="line">slm_pub_data_getsize success!</span><br><span class="line">pmem_size = 13</span><br><span class="line">slm_pub_data_read success!</span><br><span class="line">slm_pub_data_read readBuf = name:zhangsan</span><br><span class="line">slm_logout success!</span><br><span class="line">slm_cleanup success!</span><br><span class="line"><span class="built_in">test</span> over ......</span><br><span class="line">&#123;<span class="string">&quot;OPEN_API&quot;</span>:<span class="string">&quot;no&quot;</span>,<span class="string">&quot;CUSTOM_COPYRIGHT&quot;</span>:<span class="string">&quot;no&quot;</span>,<span class="string">&quot;TOUR_MAX_COUNT&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;HOUSE_MAX_COUNT&quot;</span>:<span class="string">&quot;10&quot;</span>,<span class="string">&quot;USER_MAX_COUNT&quot;</span>:<span class="string">&quot;100&quot;</span>,<span class="string">&quot;POST_MAX_COUNT&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line">&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;zhangsan&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下图分别是数据区的<strong>只读区</strong>和<strong>公开区</strong>的数据内容</p>
<p><img src="https://pic.imgdb.cn/item/65436e31c458853aef86eee8.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/11/02/2023-11-2-Virbox%E4%BB%A3%E7%A0%81%E5%8A%A0%E5%AF%86/" data-id="cloh3aszb00005wo926nx72zj" data-title="-Virbox代码加密" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2023-10-24-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/2023-10-24-hello-world/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T11:33:18.333Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/2023-10-24-hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/10/24/2023-10-24-hello-world/" data-id="clo4h2l3l000anso96zfh0sx3" data-title="Hello World" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2023-10-24-Git学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/2023-10-24-Git%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T04:12:12.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/2023-10-24-Git%E5%AD%A6%E4%B9%A0/">2023-10-24-Git学习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Git学习"><a href="#Git学习" class="headerlink" title="Git学习"></a>Git学习</h1><h2 id="常见的版本控制工具"><a href="#常见的版本控制工具" class="headerlink" title="常见的版本控制工具"></a>常见的版本控制工具</h2><p>我们学习的东西，一定是当下最流行的！</p>
<p>主流的版本控制器有如下这些：</p>
<ul>
<li><strong>Git</strong></li>
<li><strong>SVN</strong>（Subversion）</li>
<li><strong>CVS</strong>（Concurrent Versions System）</li>
<li><strong>VSS</strong>（Micorosoft Visual SourceSafe）</li>
<li><strong>TFS</strong>（Team Foundation Server）</li>
<li>Visual Studio Online</li>
</ul>
<p>版本控制产品非常的多（Perforce、Rational ClearCase、RCS（GNU Revision Control System）、Serena Dimention、SVK、BitKeeper、Monotone、Bazaar、Mercurial、SourceGear Vault），现在影响力最大且使用最广泛的是Git与SVN</p>
<h2 id="版本控制分类"><a href="#版本控制分类" class="headerlink" title="版本控制分类"></a>版本控制分类</h2><p><strong>1、本地版本控制</strong></p>
<p>记录文件每次的更新，可以对每个版本做一个快照，或是记录补丁文件，适合个人用，如RCS。</p>
<p><img src="/../assets/640-1620958262697.png" alt="图片"></p>
<p><strong>2、集中版本控制  SVN</strong></p>
<p>所有的版本数据都保存在服务器上，协同开发者从服务器上同步更新或上传自己的修改</p>
<p><img src="/../assets/640.png" alt="图片"></p>
<p>所有的版本数据都存在服务器上，用户的本地只有自己以前所同步的版本，如果不连网的话，用户就看不到历史版本，也无法切换版本验证问题，或在不同分支工作。而且，所有数据都保存在单一的服务器上，有很大的风险这个服务器会损坏，这样就会丢失所有的数据，当然可以定期备份。代表产品：SVN、CVS、VSS</p>
<p><strong>3、分布式版本控制 	Git</strong></p>
<p>每个人都拥有全部的代码！安全隐患！</p>
<p>所有版本信息仓库全部同步到本地的每个用户，这样就可以在本地查看所有版本历史，可以离线在本地提交，只需在连网时push到相应的服务器或其他用户那里。由于每个用户那里保存的都是所有的版本数据，只要有一个用户的设备没有问题就可以恢复所有的数据，但这增加了本地存储空间的占用。</p>
<p>不会因为服务器损坏或者网络问题，造成不能工作的情况！</p>
<p><img src="/../assets/640(1).png" alt="图片"></p>
<h2 id="Git和SVN最主要区别"><a href="#Git和SVN最主要区别" class="headerlink" title="Git和SVN最主要区别"></a>Git和SVN最主要区别</h2><p><code>svn</code>是集中式版本控制系统，版本库是集中放在中央服务器的，而工作的时候，用的都是自己的电脑，所以要从中央服务器得到最新的版本，然后工作，需要把自己做完的活推送到中央服务器。集中式版本控制系统是必须联网才能工作，对网络带宽要求较高。</p>
<p><code>Git</code>是分布式本本控制系统，没有中央服务器，每个人的电脑就是一个完整的版本库，工作的时候不需要联网了，因为版本都在自己的电脑上，协同的方法是这样的：比如说自己在电脑上改了A，其他人也在电脑上改了A，这时候，你们两之间只需要把各自的修改推送给对方，就可以互相看到对方的修改了，Git可以直接看到更新了哪些代码和文件！</p>
<p><strong>Git是目前世界上最先进的分布式版本控制系统</strong></p>
<h2 id="Git历史"><a href="#Git历史" class="headerlink" title="Git历史"></a>Git历史</h2><p>同生活中的许多伟大事物一样，Git 诞生于一个极富纷争大举创新的年代。</p>
<p>Linux 内核开源项目有着为数众广的参与者。绝大多数的 Linux 内核维护工作都花在了提交补丁和保存归档的繁琐事务上(1991－2002年间)。到 2002 年，整个项目组开始启用一个专有的分布式版本控制系统 BitKeeper 来管理和维护代码。</p>
<p>Linux社区中存在很多的大佬！破解研究 BitKeeper ！</p>
<p>到了 2005 年，开发 BitKeeper 的商业公司同 Linux 内核开源社区的合作关系结束，他们收回了 Linux 内核社区免费使用 BitKeeper 的权力。这就迫使 Linux 开源社区(特别是 Linux 的缔造者 Linus Torvalds)基于使用 BitKeeper 时的经验教训，开发出自己的版本系统。（2周左右！） 也就是后来的 Git！</p>
<p><strong>Git是目前世界上最先进的分布式版本控制系统。</strong></p>
<p>Git是免费、开源的，最初Git是为辅助 Linux 内核开发的，来替代 BitKeeper！<img src="/../assets/640-1620964087783.png" alt="图片"></p>
<p>Linux和Git之父李纳斯·托沃兹（Linus Benedic Torvalds）1969、芬兰 </p>
<h2 id="环境配置："><a href="#环境配置：" class="headerlink" title="环境配置："></a>环境配置：</h2><p>淘宝镜像安装Git ： <a target="_blank" rel="noopener" href="https://npm.taobao.org/mirrors/git-for-windows/v2.25.1.windows.1/">https://npm.taobao.org/mirrors/git-for-windows/v2.25.1.windows.1/</a></p>
<p><img src="/../assets/640-1620964081607.png" alt="图片"></p>
<p><strong>Git Bash：</strong>Unix与Linux风格的命令行，使用最多，推荐最多</p>
<p><strong>Git CMD：</strong>Windows风格的命令行</p>
<p><strong>Git GUI</strong>：图形界面的Git，不建议初学者使用，尽量先熟悉常用命令</p>
<h3 id="基本的Linux命令学习"><a href="#基本的Linux命令学习" class="headerlink" title="基本的Linux命令学习"></a>基本的Linux命令学习</h3><ol>
<li>cd：改变目录</li>
<li>cd .. :回退到上一个目录，直接cd 进入默认目录</li>
<li>pwd：显示当前坐在的目录路径</li>
<li>ls（ll）：都是列出当前目录中的所有文件，只不过ll列出的内容详细</li>
<li>touch：新建一个文件  touch index.js  新建index.js文件</li>
<li>rm：删除一个文件，rm index.js 就会把index.js文件删除</li>
<li>mkdir：新建一个目录，就是新建一个文件夹</li>
<li>rm -r：删除一个文件夹，rm -r src 删除src目录</li>
<li>mv ：移动文件，mv index.html src；index.html是我们要移动的文件，src是目标文件夹，当然，这样写必定是在同一目录下</li>
<li>reset：重新初始化终端&#x2F;清屏</li>
<li>clear ：清屏</li>
<li>history ：查看命令历史</li>
<li>help：帮助</li>
<li>exit：退出</li>
<li>＃：注释</li>
</ol>
<h3 id="Git配置"><a href="#Git配置" class="headerlink" title="Git配置"></a>Git配置</h3><p>查看配置 <code>git config -l</code></p>
<p>系统配置<code>git config --system --list</code></p>
<p>本地配置(用户配置)<code>git config --global --list</code></p>
<h3 id="Git相关的配置文件"><a href="#Git相关的配置文件" class="headerlink" title="Git相关的配置文件"></a>Git相关的配置文件</h3><p>\Git\etc\gitconfig：Git安装目录下的gitconfig  –system级</p>
<p><img src="/../assets/1620956099413.png" alt="1620956099413"></p>
<p>C:\Users\飞驰的苏弋： 只适用于当前登录用户的配置  –global</p>
<p><img src="/../assets/1620956352338.png" alt="1620956352338"></p>
<p>&#x3D;&#x3D;设置用户名和邮箱（用户标识，必要）&#x3D;&#x3D;</p>
<p>当年装Git后首先要做的事情是设置你的用户名称和e-mail地址。这是非常重要的，因为每次Git提交都会使用该信息。它被永远的嵌入到了你的提交中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name  <span class="string">&quot;suyi&quot;</span>   <span class="comment">#名称</span></span><br><span class="line">git config --global user.email <span class="string">&quot;990784805@qq.com&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Git基本理论（核心）"><a href="#Git基本理论（核心）" class="headerlink" title="Git基本理论（核心）"></a>Git基本理论（核心）</h3><blockquote>
<p>工作区域</p>
</blockquote>
<p>Git本地有三个工作区域：中作目录（Working Directory）、暂存区（Stage&#x2F;Index）、资源库（Repository或Git Directory）。如果在加上远程的git仓库（Remote Directory）就可以分为四个工作区域。文件在这四个区域之间的转换关系如下：</p>
<p><img src="/../assets/1620956950822.png" alt="1620956950822"></p>
<ul>
<li>Workspace：工作区，就是你平时存放项目代码的地方</li>
<li>Index&#x2F;Stage：暂存区，用于临时存放你的改动，事实上它只是一个文件，保存即将提交到文件列表信息</li>
<li>Repository：仓库区（或本地仓库），就是安全存放数据的位置，这里面有你提交到所有版本的数据。其中HEAD指向最新放入仓库的版本。</li>
<li>Remote：远程仓库，托管代码的服务器，可以简单的认为是你项目组中的一台电脑用于远程数据交换</li>
</ul>
<p>本地的三个区域确切的说应该是git仓库中HEAD指向的版本：</p>
<p><img src="/../assets/1620957184415.png" alt="1620957184415"></p>
<ul>
<li>Directory：使用Git管理的一个目录，也就是一个仓库，包含我们的工作空间和Git的管理空间。</li>
<li>Workspace：需要通过Git进行版本控制的目录和文件，这些目录和文件组成了工作空间。</li>
<li>.git：存放Git管理信息的目录，初始化仓库的时候自动创建。</li>
<li>Index&#x2F;Stage：暂存区，或者叫待提交更新区，在提交进入repo之前，我们可以把所有的更新放在暂存区。</li>
<li>Local Repo：本地仓库，一个存放在本地的版本库；HEAD会只是当前的开发分支（branch）。</li>
<li>Stash：隐藏，是一个工作状态保存栈，用于保存&#x2F;恢复Workspace中的临时状态。</li>
</ul>
<blockquote>
<p>工作流程</p>
</blockquote>
<p>git的工作流程一般是这样的：</p>
<ol>
<li>在工作目录中添加、修改文件；</li>
<li>将需要进行版本管理的文件放入暂存区；</li>
<li>将暂存区域的文件提交到git仓库。</li>
</ol>
<p>因此，git管理的文件有三种状态：已修改（modified），已暂存（staged），已提交（committed）</p>
<p><img src="/../assets/1620957820224.png" alt="1620957820224"></p>
<h2 id="Git项目搭建"><a href="#Git项目搭建" class="headerlink" title="Git项目搭建"></a>Git项目搭建</h2><h3 id="创建工作目录与常用指令"><a href="#创建工作目录与常用指令" class="headerlink" title="创建工作目录与常用指令"></a>创建工作目录与常用指令</h3><p>工作目录（WorkSpace)一般就是你希望Git帮助你管理的文件夹，可以是你项目的目录，也可以是一个空目录，建议不要有中文。</p>
<p>日常使用只要记住下图6个命令：<img src="/../assets/640-1620958450077.png" alt="图片"></p>
<h3 id="本地仓库搭建"><a href="#本地仓库搭建" class="headerlink" title="本地仓库搭建"></a>本地仓库搭建</h3><p>创建本地仓库的方法有两种，一种是创建全新的仓库，另一种是克隆远程仓库。</p>
<ol>
<li><p>创建全新的仓库，需要用Git管理的项目的根目录执行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在当前目录新建一个Git代码库</span></span><br><span class="line">git init</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行后可以看到，仅仅在项目目录多出了一个.git目录，关于本版等的信息都在这个目录里面。</p>
</li>
</ol>
<h3 id="克隆远程仓库"><a href="#克隆远程仓库" class="headerlink" title="克隆远程仓库"></a>克隆远程仓库</h3><ol>
<li><p>另一种方式是克隆远程目录，由于是将远程服务器上的仓库完全镜像一份至本地！ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#克隆一个项目和它的整个代码历史（版本信息）</span></span><br><span class="line">git <span class="built_in">clone</span> [url] <span class="comment">#https://gitee.com/kuangstudy/openclass.git</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>去gitee或者github上克隆一个测试！</p>
</li>
</ol>
<h2 id="git文件操作"><a href="#git文件操作" class="headerlink" title="git文件操作"></a>git文件操作</h2><h3 id="文件的四种状态"><a href="#文件的四种状态" class="headerlink" title="文件的四种状态"></a>文件的四种状态</h3><p>版本控制就是对文件的版本控制，要对文件进行修改、提交等操作，首先要知道文件当前在什么状态，不然可能会提交了现在还不想提交的文件，或者要提交的文件没提交上。 </p>
<ul>
<li>Untracked: 未跟踪, 此文件在文件夹中, 但并没有加入到git库, 不参与版本控制. 通过git add 状态变为Staged.</li>
<li>Unmodify: 文件已经入库, 未修改, 即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处, 如果它被修改, 而变为Modified. 如果使用git rm移出版本库, 则成为Untracked文件</li>
<li>Modified: 文件已修改, 仅仅是修改, 并没有进行其他的操作. 这个文件也有两个去处, 通过git add可进入暂存staged状态, 使用git checkout 则丢弃修改过, 返回到unmodify状态, 这个git checkout即从库中取出文件, 覆盖当前修改 !</li>
<li>Staged: 暂存状态. 执行git commit则将修改同步到库中, 这时库中的文件和本地文件又变为一致, 文件为Unmodify状态. 执行git reset HEAD filename取消暂存, 文件状态为Modified</li>
</ul>
<h3 id="查看文件状态"><a href="#查看文件状态" class="headerlink" title="查看文件状态"></a>查看文件状态</h3><p>上面说文件有4种状态，通过如下命令可以查看到文件的状态： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看指定文件状态</span></span><br><span class="line">git status [filename]</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看所有文件状态</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment">#git add.   添加所有文件到暂存区</span></span><br><span class="line"><span class="comment">#git commit -m &quot;消息内容&quot;  提交暂存区中的内容到本地仓库  -m 提交信息</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h3><p>有些时候我们不想把某些文件纳入版本控制中，比如数据库文件，临时文件，设计文件等</p>
<p>在主目录下建立”<code>.gitignore</code>“文件，此文件有如下规则：</p>
<ol>
<li>忽略文件中的空行或以井号（#）开始的行将会被忽略。</li>
<li>可以使用Linux通配符。例如：星号（*）代表任意多个字符，问号（？）代表一个字符，方括号（[abc]）代表可选字符范围，大括号（{string1,string2,…}）代表可选的字符串等。</li>
<li>如果名称的最前面有一个感叹号（!），表示例外规则，将不被忽略。</li>
<li>如果名称的最前面是一个路径分隔符（&#x2F;），表示要忽略的文件在此目录下，而子目录中的文件不忽略。</li>
<li>如果名称的最后面是一个路径分隔符（&#x2F;），表示要忽略的是此目录下该名称的子目录，而非文件（默认文件或目录都忽略）。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*.txt      <span class="comment">#虎烈所有  .txt结尾的文件，这样的话上传就不会被选中</span></span><br><span class="line">!lib.txt   <span class="comment">#但lib.txt除外</span></span><br><span class="line">/temp/     <span class="comment">#仅忽略项目根目录下的TODO文件，不包括其他目录temp</span></span><br><span class="line">build/     <span class="comment">#忽略build/目录下的所有文件</span></span><br><span class="line">doc/*.txt  <span class="comment">#会忽略doc/notes.txt  但不包括doc/server/arch.txt</span></span><br></pre></td></tr></table></figure>



<p>idea <code>.gitignore</code>文件配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">*.class</span><br><span class="line"></span><br><span class="line">*.log</span><br><span class="line"></span><br><span class="line">*.lock</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#Package File</span><br><span class="line"></span><br><span class="line">*.jar</span><br><span class="line"></span><br><span class="line">*.war</span><br><span class="line"></span><br><span class="line">*.ear</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># idea</span><br><span class="line"></span><br><span class="line">.idea/</span><br><span class="line"></span><br><span class="line">*.iml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*.velocity.log*</span><br><span class="line"></span><br><span class="line">### STS ###</span><br><span class="line">.apt_generated</span><br><span class="line">.factorypath</span><br><span class="line">.springBeans</span><br><span class="line"></span><br><span class="line">### IntelliJ</span><br><span class="line"></span><br><span class="line">*.iml</span><br><span class="line">*.ipr</span><br><span class="line">*.iws</span><br><span class="line">.idea</span><br><span class="line">.classpath</span><br><span class="line">.project</span><br><span class="line">.settings/</span><br><span class="line">bin/</span><br><span class="line"></span><br><span class="line">*.log</span><br><span class="line">tmp/</span><br><span class="line"></span><br><span class="line">#rebel</span><br><span class="line">*rebel.xml*</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="使用码云"><a href="#使用码云" class="headerlink" title="使用码云"></a>使用码云</h3><p>github 是有墙的，比较慢，在国内的话，我们一般使用 gitee ，公司中有时候会搭建自己的gitlab服务器</p>
<p>这个其实可以作为大家未来找工作的一个重要信息！ </p>
<ol>
<li><p>注册登录码云，完善个人信息 <img src="/../assets/640-1620964061638.jpg" alt="图片"></p>
</li>
<li><p>设置本机绑定SSH公钥，实现免密码登录！（免密码登录，这一步挺重要的，码云是远程仓库，我们是平时工作在本地仓库！) </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入 C:\Users\飞驰的苏弋\.ssh 目录</span></span><br><span class="line"><span class="comment"># 生成公钥</span></span><br><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure>

<p><img src="/../assets/640-1620963715568.png" alt="图片"></p>
</li>
<li><p>将公钥信息public key 添加到码云账户中即可！ <img src="/../assets/640-1620964056536.png" alt="图片"></p>
</li>
<li><p>使用码云创建一个自己的仓库！ <img src="/../assets/640-1620963731390.png" alt="图片">许可证：开源是否可以随意转载，开源但是不能商业使用，不能转载，…  限制！</p>
<p> <img src="/../assets/640-1620963749656.png" alt="图片">克隆到本地！ <img src="/../assets/640.jpg" alt="图片"></p>
</li>
</ol>
<h3 id="IDEA中集成Git"><a href="#IDEA中集成Git" class="headerlink" title="IDEA中集成Git"></a>IDEA中集成Git</h3><ol>
<li><p>新建项目，绑定git。 <img src="/../assets/640-1620963818677.jpg" alt="图片">注意观察idea中的变化 <img src="/../assets/640-1620963836745.png" alt="图片"></p>
</li>
<li><p>修改文件，使用IDEA操作git。 </p>
<ul>
<li>添加到暂存区</li>
<li>commit 提交</li>
<li>push到远程仓库</li>
</ul>
</li>
<li><p>提交测试 <img src="/../assets/640-1620963875487.jpg" alt="图片"></p>
<p>这些都是单个人的操作！</p>
<p>学习的方式最重要！学会学习！我上课的更多时候都是在教大家去学习一种理念和思想（学习方式）</p>
<p>有道无术、术尚可求。有术无道、止于术！</p>
<p>真正的教学，授人以渔！</p>
</li>
</ol>
<h3 id="说明：Git分支"><a href="#说明：Git分支" class="headerlink" title="说明：Git分支"></a>说明：Git分支</h3><p>分支在GIT中相对较难，分支就是科幻电影里面的平行宇宙，如果两个平行宇宙互不干扰，那对现在的你也没啥影响。不过，在某个时间点，两个平行宇宙合并了，我们就需要处理一些问题了！ </p>
<p><img src="/../assets/640-1620963920685.png" alt="图片"></p>
<p><img src="/../assets/640-1620963925793.png" alt="图片"></p>
<p>git分支中常用指令： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#列出所有本地分支</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出所有远程分支</span></span><br><span class="line">    git branch -r</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建一个分支，但依然停留在当前分支</span></span><br><span class="line">git branch [branch-name]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建一个分支，并切换到该分支</span></span><br><span class="line">git checkout -b [branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并指定分支到当前分支</span></span><br><span class="line">$ git merge [branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除分支</span></span><br><span class="line">$ git branch -d [branch-name]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程分支</span></span><br><span class="line">$ git push origin --delete [branch-name]</span><br><span class="line">$ git branch -dr [remote/branch]</span><br><span class="line"></span><br><span class="line"><span class="comment">#切换远程分支 </span></span><br><span class="line">$ git checkout -b suyi  origin/suyi</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>IDEA中操作 </p>
<p><img src="/../assets/640-1620964003329.png" alt="图片"></p>
<p>如果同一个文件在合并分支时都被修改了则会引起冲突：解决的办法是我们可以修改冲突文件后重新提交！选择要保留他的代码还是你的代码！</p>
<p>master主分支应该非常稳定，用来发布新版本，一般情况下不允许在上面工作，工作一般情况下在新建的dev分支上工作，工作完后，比如上要发布，或者说dev分支代码稳定后可以合并到主分支master上来。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/10/24/2023-10-24-Git%E5%AD%A6%E4%B9%A0/" data-id="clo4h2l3g0002nso9fzvxbyd5" data-title="2023-10-24-Git学习" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2023-10-24-Jwt的鉴权登录-拦截器-注册拦截器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/2023-10-24-Jwt%E7%9A%84%E9%89%B4%E6%9D%83%E7%99%BB%E5%BD%95-%E6%8B%A6%E6%88%AA%E5%99%A8-%E6%B3%A8%E5%86%8C%E6%8B%A6%E6%88%AA%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T04:12:12.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/2023-10-24-Jwt%E7%9A%84%E9%89%B4%E6%9D%83%E7%99%BB%E5%BD%95-%E6%8B%A6%E6%88%AA%E5%99%A8-%E6%B3%A8%E5%86%8C%E6%8B%A6%E6%88%AA%E5%99%A8/">Jwt的鉴权登录-拦截器-注册拦截器</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="一、实现大致流程"><a href="#一、实现大致流程" class="headerlink" title="一、实现大致流程"></a>一、实现大致流程</h3><ul>
<li><p>在浏览器发起请求来执行登录操作，此时会访问登录的接口，如果访问的不是登录接口,为了安全，使其跳转到登录页面.如果登录成功之后，我们需要生成一个jwt令牌，将生成的 jwt令牌返回给前端。</p>
</li>
<li><p>前端拿到jwt令牌之后，会将jwt令牌存储起来。在后续的每一次请求中都会将jwt令牌携带到服务端。</p>
</li>
<li><p>服务端统一拦截请求之后，先来判断一下这次请求有没有把令牌带过来，如果没有带过来，直接拒绝访问，如果带过来了，还要校验一下令牌是否是有效。如果有效，就直接放行进行请求的处理。</p>
</li>
</ul>
<h3 id="二、JWT令牌"><a href="#二、JWT令牌" class="headerlink" title="二、JWT令牌"></a>二、JWT令牌</h3><h4 id="1-JWT是什么"><a href="#1-JWT是什么" class="headerlink" title="1.JWT是什么?"></a>1.JWT是什么?</h4><p>​	JWT (全称：Json Web Token)是一个开放标准(RFC 7519)，它定义了一种<strong>简洁</strong>的、<strong>自包含</strong>的方式，用于作为 JSON 对象在各方之间安全地传输信息。该信息可以被验证和信任，因为它是数字签名的。</p>
<p><strong>简洁</strong>：是指jwt就是一个简单的字符串。可以在请求参数或者是请求头当中直接传递。 <strong>自包含</strong>：指的是jwt令牌，看似是一个随机的字符串，但是我们是可以根据自身的需求在jwt令牌中存储自定义的数据内容。如：可以直接在jwt令牌中存储用户的相关信息。</p>
<p>简单点说就是一种认证机制，让后台知道该请求是来自于受信的客户端。<strong>JWT 主要用于用户登录鉴权</strong></p>
<h4 id="2-JWT令牌的组成"><a href="#2-JWT令牌的组成" class="headerlink" title="2.JWT令牌的组成"></a>2.JWT令牌的组成</h4><p>JWT的组成： （JWT令牌由三个部分组成，三个部分之间使用英文的点来分割）</p>
<ul>
<li><p>第一部分：Header(头）， 记录令牌类型、签名算法等。 例如：{“alg”:”HS256”,”type”:”JWT”}</p>
</li>
<li><p>第二部分：Payload(有效载荷），携带一些自定义信息、默认信息等。 例如：{“id”:”1”,”username”:”Tom”}</p>
</li>
<li><p>第三部分：Signature(签名），防止Token被篡改、确保安全性。将header、payload，并加入指定秘钥，通过指定签名算法计算而来。</p>
</li>
</ul>
<blockquote>
<p>签名的目的就是为了防jwt令牌被篡改，而正是因为jwt令牌最后一个部分数字签名的存在，所以整个jwt 令牌是非常安全可靠的。一旦jwt令牌当中任何一个部分、任何一个字符被篡改了，整个令牌在校验的时候都会失败，所以它是非常安全可靠的。</p>
</blockquote>
<p><img src="https://pic.imgdb.cn/item/6537c8eec458853aef4e6529.jpg" alt="img"></p>
<h4 id="3-JWT令牌在登录认证的应用"><a href="#3-JWT令牌在登录认证的应用" class="headerlink" title="3,JWT令牌在登录认证的应用"></a>3,JWT令牌在登录认证的应用</h4><ol>
<li><p>在浏览器发起请求来执行登录操作，此时会访问登录的接口，如果登录成功之后，我们需要生成一个jwt令牌，将生成的 jwt令牌返回给前端。</p>
</li>
<li><p>前端拿到jwt令牌之后，会将jwt令牌存储起来。在后续的每一次请求中都会将jwt令牌携带到服务端。</p>
</li>
<li><p>服务端统一拦截请求之后，先来判断一下这次请求有没有把令牌带过来，如果没有带过来，直接拒绝访问，如果带过来了，还要校验一下令牌是否是有效。如果有效，就直接放行进行请求的处理。</p>
</li>
</ol>
<h4 id="4-JWT令牌鉴权登录实现步骤"><a href="#4-JWT令牌鉴权登录实现步骤" class="headerlink" title="4,JWT令牌鉴权登录实现步骤"></a>4,JWT令牌鉴权登录实现步骤</h4><h5 id="1-引入JWT依赖"><a href="#1-引入JWT依赖" class="headerlink" title="1,引入JWT依赖"></a>1,引入JWT依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JWT依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-创建JWT工具类"><a href="#2-创建JWT工具类" class="headerlink" title="2,创建JWT工具类"></a>2,创建JWT工具类</h5> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtUtils</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">signKey</span> <span class="operator">=</span> <span class="string">&quot;xxx&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Long</span> <span class="variable">expire</span> <span class="operator">=</span> <span class="number">43200000L</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> claims JWT第二部分负载 payload 中存储的内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateJwt</span><span class="params">(Map&lt;String, Object&gt; claims)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> Jwts.builder()</span><br><span class="line">                .addClaims(claims)</span><br><span class="line">                .signWith(SignatureAlgorithm.HS256, signKey)</span><br><span class="line">                .setExpiration(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis() + expire))</span><br><span class="line">                .compact();</span><br><span class="line">        <span class="keyword">return</span> jwt;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jwt JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> JWT第二部分负载 payload 中存储的内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title function_">parseJWT</span><span class="params">(String jwt)</span>&#123;</span><br><span class="line">        <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> Jwts.parser()</span><br><span class="line">                .setSigningKey(signKey)</span><br><span class="line">                .parseClaimsJws(jwt)</span><br><span class="line">                .getBody();</span><br><span class="line">        <span class="keyword">return</span> claims;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-三层架构实现登录成功，生成JWT令牌并返回"><a href="#3-三层架构实现登录成功，生成JWT令牌并返回" class="headerlink" title="3,三层架构实现登录成功，生成JWT令牌并返回"></a>3,三层架构实现登录成功，生成JWT令牌并返回</h5><p>controller层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 登录控制层</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;登录&#123;&#125;&quot;</span>,user);</span><br><span class="line">            <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> userService.login(user);</span><br><span class="line">            <span class="keyword">return</span> Result.success(<span class="literal">true</span>,<span class="string">&quot;登录成功!!&quot;</span>,jwt);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> Result.error(<span class="literal">false</span>,<span class="string">&quot;登录失败!!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Service层</p>
<p>接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户登录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">login</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户登录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(user == <span class="literal">null</span> || user.getUsername() == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(user.getUsername())</span><br><span class="line">        || user.getPassword() == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(user.getPassword()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户不存在!!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//根据用户查询用户的信息</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">dbUser</span> <span class="operator">=</span> userMapper.findByUsername(user.getUsername());</span><br><span class="line">        <span class="comment">//判断密码是否正确</span></span><br><span class="line">        <span class="keyword">if</span> (!user.getPassword().equals(dbUser.getPassword()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户名或密码错误!!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//生成jwt令牌并返回</span></span><br><span class="line">        HashMap&lt;String, Object&gt; claims = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        claims.put(<span class="string">&quot;id&quot;</span>,dbUser.getId());</span><br><span class="line">        claims.put(<span class="string">&quot;username&quot;</span>,dbUser.getUsername());</span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> JwtUtils.generateJwt(claims);</span><br><span class="line">        <span class="keyword">return</span> jwt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Mapper层</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public interface UserService &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 用户登录</span><br><span class="line">     */</span><br><span class="line">    String login(User user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">==========xml===============</span><br><span class="line"><span class="comment">&lt;!--登录:根据用户名称查询用户信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByUsername&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;xxxxxxx&quot;</span>&gt;</span></span><br><span class="line">    select id,birthday,gender,username,password,</span><br><span class="line">    remark,station,telephone</span><br><span class="line">    from t_user</span><br><span class="line">    where username = #&#123;username&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="三、拦截器Interceptor"><a href="#三、拦截器Interceptor" class="headerlink" title="三、拦截器Interceptor"></a>三、拦截器Interceptor</h3><h4 id="1-什么是拦截器？"><a href="#1-什么是拦截器？" class="headerlink" title="1,什么是拦截器？"></a>1,什么是拦截器？</h4><p>​        拦截器的主要是：基于Java的反射机制，属于**面向切面编程(AOP)**的一种运用，就是在Service或者一个方法前调用一个方法，或者在方法后调用一个方法，甚至在抛出异常的时候做业务逻辑的操作。</p>
<p>​	拦截器的作用类似于Servlet 中的Filter（过滤器），都可以用于对处理器进行预处理和后处理。在Spring MVC 与Spring Boot 中使用拦截器一般是实现HandlerInterceptor 接口。</p>
<p>​	拦截器的作用：拦截请求，在指定方法调用前后，根据业务需要执行预先设定的代码。</p>
<h4 id="2-拦截器Interceptor鉴权登录实现步骤"><a href="#2-拦截器Interceptor鉴权登录实现步骤" class="headerlink" title="2,拦截器Interceptor鉴权登录实现步骤"></a>2,拦截器Interceptor鉴权登录实现步骤</h4><h5 id="1-定义拦截器"><a href="#1-定义拦截器" class="headerlink" title="1,定义拦截器"></a>1,定义拦截器</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span>&#123;</span><br><span class="line">     <span class="comment">//目标资源方法执行前执行。 返回true：放行    返回false：不放行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1,先获取请求头</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/json;charset = UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        <span class="comment">//2,判断请求头是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (token == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(token))&#123;</span><br><span class="line">            <span class="comment">//请求头不存在或者请求头为空</span></span><br><span class="line">            log.info(<span class="string">&quot;token不存在&quot;</span>);</span><br><span class="line">            <span class="type">Result</span> <span class="variable">error</span> <span class="operator">=</span> Result.error(<span class="literal">false</span>, <span class="string">&quot;NOT_LOGIN&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> mapper.writeValueAsString(error);</span><br><span class="line">            response.getWriter().write(result);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3,请求头不正确</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtils.parseJWT(token);</span><br><span class="line">        &#125;  <span class="keyword">catch</span> (Exception e)  &#123;</span><br><span class="line">            log.info(<span class="string">&quot;请求头不正确!!&quot;</span>);</span><br><span class="line">            <span class="type">Result</span> <span class="variable">error</span> <span class="operator">=</span> Result.error(<span class="literal">false</span>, <span class="string">&quot;NOT_LOGIN&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> mapper.writeValueAsString(error);</span><br><span class="line">            response.getWriter().write(result);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//==========下面与登录无关,不用写==============</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">//目标资源方法执行后执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle ... &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//视图渲染完毕后执行，最后执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion .... &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>preHandle方法：目标资源方法执行前执行。 返回true：放行 返回false：不放行</li>
<li>postHandle方法：目标资源方法执行后执行</li>
<li>afterCompletion方法：视图渲染完毕后执行，最后执行</li>
</ul>
<h5 id="2-注册配置拦截器"><a href="#2-注册配置拦截器" class="headerlink" title="2,注册配置拦截器"></a>2,注册配置拦截器</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LoginCheckInterceptor loginCheckInterceptor;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//定义拦截对象</span></span><br><span class="line">        registry.addInterceptor(loginCheckInterceptor)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/user/login&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="WebMvcConfigurer"><a href="#WebMvcConfigurer" class="headerlink" title="WebMvcConfigurer"></a>WebMvcConfigurer</h3><p>WebMvcConfigurer接口中的核心方法之一addInterceptors(InterceptorRegistry registry)方法表示添加拦截器。主要用于进行用户登录状态的拦截，日志的拦截等。</p>
<ol>
<li>addInterceptor：需要一个实现HandlerInterceptor接口的拦截器实例</li>
<li>addPathPatterns：用于设置拦截器的过滤路径规则；addPathPatterns(“&#x2F;**”)对所有请求都拦截</li>
<li>excludePathPatterns：用于设置不需要拦截的过滤规则，静态资源啥的</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/10/24/2023-10-24-Jwt%E7%9A%84%E9%89%B4%E6%9D%83%E7%99%BB%E5%BD%95-%E6%8B%A6%E6%88%AA%E5%99%A8-%E6%B3%A8%E5%86%8C%E6%8B%A6%E6%88%AA%E5%99%A8/" data-id="clo4h2l3h0003nso9b6rt7bjo" data-title="Jwt的鉴权登录-拦截器-注册拦截器" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2023-10-24-Linux系统部署SpringBoot项目" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/2023-10-24-Linux%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2SpringBoot%E9%A1%B9%E7%9B%AE/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T04:12:12.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/2023-10-24-Linux%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2SpringBoot%E9%A1%B9%E7%9B%AE/">Linux系统部署SpringBoot项目</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Linux系统部署SpringBoot项目"><a href="#Linux系统部署SpringBoot项目" class="headerlink" title="Linux系统部署SpringBoot项目"></a>Linux系统部署SpringBoot项目</h1><h2 id="服务器环境准备-准备jdk，Nginx，MySQL"><a href="#服务器环境准备-准备jdk，Nginx，MySQL" class="headerlink" title="服务器环境准备 准备jdk，Nginx，MySQL"></a>服务器环境准备 准备jdk，Nginx，MySQL</h2><p>宝塔安装</p>
<p>Centos安装命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh</span><br></pre></td></tr></table></figure>

<ol>
<li>使用宝塔安装tomcat8（tomcat8会自带jdk8的环境）</li>
<li>安装Nginx（待会配置域名）</li>
<li>安装MySQL（服务使用线上数据库，当然你在打jar包之前就要配置好数据库了）</li>
</ol>
<h2 id="运行jar包"><a href="#运行jar包" class="headerlink" title="运行jar包"></a>运行jar包</h2><ol>
<li>将jar包上传到服务器上（哪里都行，你能找到就好）</li>
<li>使用命令云jar包<br>使用项目中默认的端口号</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java -jar springboot-Linux-0.0.1-SNAPSHOT.jar --server.port=8080 &gt;temp.txt &amp;</span><br><span class="line"><span class="comment">#持续在Linux服务器上运行jar包</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar springboot-Linux-0.0.1-SNAPSHOT.jar --server.port=8080 &gt;temp.txt &amp;</span><br></pre></td></tr></table></figure>

<p>查看运行日志</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> temp.txt</span><br></pre></td></tr></table></figure>

<h4 id="如何关闭服务？"><a href="#如何关闭服务？" class="headerlink" title="如何关闭服务？"></a>如何关闭服务？</h4><ol>
<li>查看进程号</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep java</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>杀死进程</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -s 9  104373</span><br></pre></td></tr></table></figure>

<h1 id="配置域名-war包"><a href="#配置域名-war包" class="headerlink" title="配置域名  (war包)"></a>配置域名  (war包)</h1><ol>
<li><p>腾讯云或阿里云申请域名，解析域名，甚至域名备案；</p>
</li>
<li><p>腾讯云或阿里云端口号：<code>8080</code> <code>80</code> <code>3306</code> <code>22</code> <code>21</code> 等确认开放，并与宝塔面板端口开放保持一致<br><img src="/../assets/1620899165288.png" alt="1620899165288"></p>
<p><img src="/../assets/1620899216236.png" alt="1620899216236"></p>
</li>
<li><p>打开宝塔的tomcat的配置文件，配置项目路径：   &#x3D;&#x3D;不必改端口号为80&#x3D;&#x3D;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Host</span> <span class="attr">autoDeploy</span>=<span class="string">&quot;true&quot;</span> <span class="attr">name</span>=<span class="string">&quot;haojiacheng.cn&quot;</span> <span class="attr">unpackWARs</span>=<span class="string">&quot;true&quot;</span> <span class="attr">xmlNamespaceAware</span>=<span class="string">&quot;false&quot;</span> <span class="attr">xmlValidation</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Context</span> <span class="attr">crossContext</span>=<span class="string">&quot;true&quot;</span> <span class="attr">docBase</span>=<span class="string">&quot;/www/server/tomcat/webapps/zhjc&quot;</span> <span class="attr">path</span>=<span class="string">&quot;&quot;</span> <span class="attr">reloadable</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Context</span> <span class="attr">docBase</span>=<span class="string">&quot;/temp/images&quot;</span> <span class="attr">path</span>=<span class="string">&quot;/pic&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>点击，网站——–》添加站点——–》</p>
<ol>
<li>有域名写域名，没域名写服务器外网IP</li>
<li>备注，FTP等看个人需求</li>
<li>根目录稍后设置<br><img src="/../assets/1620897911106.png" alt="1620897911106"></li>
</ol>
</li>
<li><p>添加完成后，测试在浏览器URL中直接输入服务器IP或域名，看是否显示站点创建成功。若成功，则去设置里改网站目录：  为自己的项目目录<br><img src="/../assets/1620898097875.png" alt="1620898097875"></p>
</li>
</ol>
<h1 id="404-not-found-nginx怎么解决方法"><a href="#404-not-found-nginx怎么解决方法" class="headerlink" title="&#x3D;&#x3D;404 not found nginx怎么解决方法&#x3D;&#x3D;"></a>&#x3D;&#x3D;404 not found nginx怎么解决方法&#x3D;&#x3D;</h1><h1 id="或-网页的静态资源无法访问"><a href="#或-网页的静态资源无法访问" class="headerlink" title="或&#x3D;&#x3D;网页的静态资源无法访问&#x3D;&#x3D;"></a>或&#x3D;&#x3D;网页的静态资源无法访问&#x3D;&#x3D;</h1><p>打开宝塔面板&#x3D;&#x3D; &#x3D;》网站&#x3D;&#x3D; &#x3D;》站点设置&#x3D;&#x3D;&#x3D;&#x3D;》配置文件</p>
<p>添加或修改如下代码：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">location</span> <span class="string">~ .*\.(gif|jpg|jpeg|bmp|png|ico|txt|js|css)$</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line"><span class="comment">    #expires      12h;</span></span><br><span class="line">    <span class="attr">proxy_pass</span> <span class="string">http://haojiacheng.cn:8080;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"><span class="attr">location</span> <span class="string">~ .*\.(js|css)?$</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">    <span class="attr">proxy_pass</span> <span class="string">http://haojiacheng.cn:8080;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure>







<h1 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h1><ol>
<li><h2 id="使用thymeleaf摸版引擎在服务器上面出现的一种报错"><a href="#使用thymeleaf摸版引擎在服务器上面出现的一种报错" class="headerlink" title="使用thymeleaf摸版引擎在服务器上面出现的一种报错"></a>使用thymeleaf摸版引擎在服务器上面出现的一种报错</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"> <span class="attr">thymeleaf:</span></span><br><span class="line">  <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br></pre></td></tr></table></figure>
</li>
<li><h2 id="宝塔账号"><a href="#宝塔账号" class="headerlink" title="宝塔账号"></a>宝塔账号</h2></li>
</ol>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">外网面板地址: http://82.156.186.10:8888/612181c6</span><br><span class="line">内网面板地址: http://10.0.8.8:8888/612181c6</span><br><span class="line">username: suyi</span><br><span class="line">password: Hjc17691324608</span><br></pre></td></tr></table></figure>





<h1 id="Linux操作数据库"><a href="#Linux操作数据库" class="headerlink" title="Linux操作数据库"></a>Linux操作数据库</h1><p>腾讯云与宝塔面板都开启&#x3D;&#x3D;3306&#x3D;&#x3D;端口</p>
<p>宝塔面板给服务器安装MySQL</p>
<p>使用Xshell7 连接服务器，进入MySQL</p>
<p><code>mysql -u root -p</code></p>
<p><code>123456</code></p>
<p><code>use mysql</code></p>
<p><code>select host,user from user;</code></p>
<p><img src="/../assets/1620721330832.png" alt="1620721330832"></p>
<p>给与root最高权限，并且不限制访问主机ip，赋予密码123456</p>
<p><code>GRANT ALL PRIVILEGES ON *.* TO root@&quot;%&quot; IDENTIFIED BY &quot;123456&quot;;</code></p>
<p>接下来直接在本地连接MySQL</p>
<p><img src="/../assets/1620721399535.png" alt="1620721399535"></p>
<p>Linux系统下的java代码&#x3D;&#x3D;&#x3D;》文件上传下载</p>
<p>在Linux根目录下创建temp&gt;images</p>
<p><img src="/../assets/1620729042127.png" alt="1620729042127"></p>
<p>并且给与temp和images这两个文件夹最高权限   否则java上传文件放不进来</p>
<p><img src="/../assets/1620729076601.png" alt="1620729076601"></p>
<p><strong>Linux下的目录是</strong>：<code>File file=new File(&quot;/temp/images/&quot;+newname+sux);</code></p>
<p><strong>windows下的目录是</strong>: <code>File file=new File(&quot;C:\\temp\\images\\&quot;+newname+sux);</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/10/24/2023-10-24-Linux%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2SpringBoot%E9%A1%B9%E7%9B%AE/" data-id="clo4h2l3h0004nso96pbabkxf" data-title="Linux系统部署SpringBoot项目" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2023-10-24-SVN学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/2023-10-24-SVN%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T04:12:12.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/2023-10-24-SVN%E5%AD%A6%E4%B9%A0/">SVN学习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="SVN学习"><a href="#SVN学习" class="headerlink" title="SVN学习"></a>SVN学习</h1><p>svn基本操作：</p>
<ul>
<li>检出：checkout</li>
<li>新增：add</li>
<li>提交：commit</li>
<li>更新：update</li>
<li>历史记录</li>
</ul>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><ul>
<li> TortoiseSVN  </li>
<li>汉化</li>
</ul>
<p><img src="/../assets/syzeiMNr8LIXg3h.jpg" alt="an"></p>
<p><img src="/../assets/AMzlLDkThOavoUX.jpg" alt="tortoisesvn"></p>
<h2 id="Checkout检出代码"><a href="#Checkout检出代码" class="headerlink" title="Checkout检出代码"></a>Checkout检出代码</h2><ol>
<li>在SVNBucket的项目详情-源码页面-复制SVN地址</li>
<li>在你需要保存代码的地方右键选择<code>SVN Chekout...</code></li>
<li>填写SVN地址，填写保存目录，输入SVNBucket网站登录用户名密码。</li>
<li>点击确定就能同步代码到本地了。</li>
</ol>
<h2 id="Update更新代码"><a href="#Update更新代码" class="headerlink" title="Update更新代码"></a>Update更新代码</h2><p>右键 SVN Update 更新代码，这样就能把其他人提交的代码同步到自己电脑上了 </p>
<p><img src="/../assets/jxpm0tah.gif" alt="SVN"></p>
<h2 id="Commit提交代码"><a href="#Commit提交代码" class="headerlink" title="Commit提交代码"></a>Commit提交代码</h2><p>提交代码也很简单，右键<code>SVN Commit...</code>，填入提交描述，就可以把本地提交的代码提交到服务器了。 在提交代码前我们应该<code>update</code>下代码，这是个好习惯，可以避免覆盖别人的代码和代码冲突。 </p>
<p><img src="/../assets/jxpm0ynx.gif" alt="svn">  </p>
<h2 id="撤销和恢复"><a href="#撤销和恢复" class="headerlink" title="撤销和恢复"></a>撤销和恢复</h2><ul>
<li>撤销本地修改</li>
<li>撤销已提交内容</li>
<li>恢复到指定版本</li>
</ul>
<h3 id="本地："><a href="#本地：" class="headerlink" title="本地："></a>本地：</h3><p><img src="/../assets/jxpm1l0x.gif" alt="svn"></p>
<h3 id="已提交"><a href="#已提交" class="headerlink" title="已提交"></a>已提交</h3><p><img src="/../assets/jxpm1px7.gif" alt="svn"></p>
<h3 id="恢复到指定版本"><a href="#恢复到指定版本" class="headerlink" title="恢复到指定版本"></a>恢复到指定版本</h3><p> <strong>右键&#x3D;&#x3D;》TortoiseSVN＝&#x3D;》显示日志</strong></p>
<ul>
<li>选择恢复到此版本   <strong>&#x3D;&#x3D;或&#x3D;&#x3D;</strong></li>
<li>恢复此版本做出的修改</li>
</ul>
<h2 id="忽略"><a href="#忽略" class="headerlink" title="忽略"></a>忽略</h2><p> <strong>右键&#x3D;&#x3D;》TortoiseSVN＝&#x3D;》增加到忽略列表</strong></p>
<h2 id="取消忽略"><a href="#取消忽略" class="headerlink" title="取消忽略"></a>取消忽略</h2><p><strong>右键&#x3D;&#x3D;》TortoiseSVN＝&#x3D;》从忽略列表删除</strong></p>
<h2 id="冲突"><a href="#冲突" class="headerlink" title="冲突"></a>冲突</h2><h3 id="什么情况容易发生冲突？"><a href="#什么情况容易发生冲突？" class="headerlink" title="什么情况容易发生冲突？"></a>什么情况容易发生冲突？</h3><ul>
<li>多个人修改了同个文件的同一行</li>
<li>无法进行合并的二进制文件</li>
</ul>
<h4 id="怎么避免冲突"><a href="#怎么避免冲突" class="headerlink" title="怎么避免冲突"></a>怎么避免冲突</h4><ul>
<li>经常update同步他人代码</li>
<li>二进制文件不要多个人同时操作</li>
</ul>
<h3 id="冲突了怎么办"><a href="#冲突了怎么办" class="headerlink" title="冲突了怎么办"></a>冲突了怎么办</h3><p>更新时发生冲突，可以选择</p>
<ul>
<li>使用“他们的”文本块解决冲突</li>
<li>使用“我的”解决有冲突的文件</li>
<li>编辑冲突，选择好时，右键&#x3D;&#x3D;》使用此文本块</li>
</ul>
<h2 id="什么时候需要开分支？"><a href="#什么时候需要开分支？" class="headerlink" title="什么时候需要开分支？"></a>什么时候需要开分支？</h2><ul>
<li>隔离线上版本和开发版本</li>
<li>大功能开发，不想影响到其他人，自己独立开个分支去开发</li>
</ul>
<p>SVN经典目录结构</p>
<ul>
<li>trunk</li>
<li>branches</li>
<li>tags</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/10/24/2023-10-24-SVN%E5%AD%A6%E4%B9%A0/" data-id="clo4h2l3i0005nso9gxxw1f2s" data-title="SVN学习" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2023-10-24-SpringBoot的application常用配置" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/2023-10-24-SpringBoot%E7%9A%84application%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T04:12:12.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/2023-10-24-SpringBoot%E7%9A%84application%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/">SpringBoot的application常用配置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="server配置"><a href="#server配置" class="headerlink" title="server配置"></a>server配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.配置tomcat访问端口</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7778</span></span><br><span class="line"><span class="comment">#2.配置http://localhost:7778/aa/bb.html这个访问地址的意思</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/aa</span></span><br><span class="line"><span class="comment">#3.Session设置存活时间是30分钟</span></span><br><span class="line">  <span class="attr">session-timeout:</span> <span class="number">30</span></span><br><span class="line"><span class="comment">#4.tomcat启动的最大线程数，即同时处理的任务个数，默认值为200</span></span><br><span class="line">  <span class="attr">tomcat.max-threads:</span> <span class="number">0</span></span><br><span class="line"><span class="comment">#5.Tomcat在解析参数的时候没有使用正确的编码格式（UTF-8）去解码</span></span><br><span class="line">  <span class="attr">tomcat.uri-encoding:</span> <span class="string">UTF-8</span></span><br></pre></td></tr></table></figure>



<h2 id="spring配置"><a href="#spring配置" class="headerlink" title="spring配置"></a>spring配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line"><span class="comment">#1.服务名称信息</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">mimi</span></span><br><span class="line"><span class="comment">#2.配置启动banner的编码和文字</span></span><br><span class="line">  <span class="attr">banner:</span></span><br><span class="line">    <span class="attr">charset:</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="attr">location:</span> <span class="string">classpath:banner.txt</span></span><br><span class="line"><span class="comment">#3.spring下的配置数据库</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment">#1.配置数据库连接池（Druid，），HikariCP 是默认的</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="comment">#2.数据库的地址</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/testDB?characterEncoding=UTF-8&amp;serverTimezone=UTC</span></span><br><span class="line">    <span class="comment">#3.配置数据库驱动，jdbc</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="comment">#4.配置数据库连接的账号</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="comment">#5.配置数据库连接的密码</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line"><span class="comment">#4.（spring:mvc下的）关于springmvc的设置</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="comment">#1.静态资源的过滤规则（在静态资源目录下，只有以/resources/开头的才能显示，不然不能显示）</span></span><br><span class="line">       <span class="attr">static-path-pattern:</span> <span class="string">/resources/**</span></span><br><span class="line"><span class="comment">#5.（spring:resources下的）设置静态资源的路径（默认的是classpath:/static,classpath:/public,classpath:/resources,classpath:/META-INF/resource）</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">static-locations:</span> [<span class="string">&quot;classpath:/static/&quot;</span>, <span class="string">&quot;classpath:/public/&quot;</span>,<span class="string">&quot;classpath:/mapper/&quot;</span>]</span><br><span class="line"><span class="comment">#6.thymeleaf的模板配置</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">      <span class="attr">prefix:</span> <span class="string">classpath:/templates</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">HTML</span></span><br><span class="line">      <span class="attr">cache:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">      <span class="comment">#新版本不支持content-type: text/html，故新写法</span></span><br><span class="line">      <span class="attr">servlet:</span></span><br><span class="line">        <span class="attr">content-type:</span> <span class="string">text/html</span></span><br></pre></td></tr></table></figure>



<p>​         </p>
<h2 id="mybatis配置"><a href="#mybatis配置" class="headerlink" title="mybatis配置"></a>mybatis配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mybatis的配置</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line"><span class="comment">#1.配置mapper文件放在resource下的mapper中</span></span><br><span class="line">    <span class="attr">mapper-locations:</span> <span class="string">classpath:/mapper/*.xml</span></span><br><span class="line"><span class="comment">#2.配置实体扫描，多个package用逗号或者分号分隔</span></span><br><span class="line">    <span class="attr">type-aliases-package:</span> <span class="string">com.example.demo.entity</span></span><br><span class="line"><span class="comment">#3.配置mybatis日志打印（这个生效后下面logging中的打印失效）</span></span><br><span class="line">    <span class="attr">configuration:</span></span><br><span class="line">      <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment">#4.配置mybatis配置文件</span></span><br><span class="line">      <span class="attr">location:</span> <span class="string">classpath:mybatis/mybatis-config.xml</span></span><br><span class="line"> <span class="comment">#打印等级（com.example.demo.dao包下的日志会打印），不是mybatis子配置</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">    <span class="attr">level:</span></span><br><span class="line">      <span class="attr">com.example.demo.dao:</span>  <span class="string">debug</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/10/24/2023-10-24-SpringBoot%E7%9A%84application%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/" data-id="clo4h2l3i0006nso9hn35cvmk" data-title="SpringBoot的application常用配置" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2023-10-24-SpringDataJpa学习笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/2023-10-24-SpringDataJpa%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T04:12:12.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/2023-10-24-SpringDataJpa%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">SpringDataJpa学习笔记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="SpringDataJpa学习笔记"><a href="#SpringDataJpa学习笔记" class="headerlink" title="SpringDataJpa学习笔记"></a>SpringDataJpa学习笔记</h1><h2 id="一、xml配置方法"><a href="#一、xml配置方法" class="headerlink" title="一、xml配置方法"></a>一、xml配置方法</h2><h3 id="1、sql脚本"><a href="#1、sql脚本" class="headerlink" title="1、sql脚本"></a>1、sql脚本</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> DATABASE if <span class="keyword">not</span> <span class="keyword">exists</span> springdata_jpa</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">set</span> utf8;</span><br><span class="line"></span><br><span class="line">use springdata_jpa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> customer(</span><br><span class="line">id <span class="type">int</span> auto_increment <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">cust_name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">cust_address <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> customer(cust_name,cust_address)<span class="keyword">VALUES</span>(<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;陕西省西安市长安区滦镇街道&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> customer;</span><br></pre></td></tr></table></figure>

<h3 id="2、导入pom依赖"><a href="#2、导入pom依赖" class="headerlink" title="2、导入pom依赖"></a>2、导入pom依赖</h3><p>父项目</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--统一管理springdata子项目的版本--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2021.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>子模块</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-entitymanager<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.4.32.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3、编写实体类pojo"><a href="#3、编写实体类pojo" class="headerlink" title="3、编写实体类pojo"></a>3、编写实体类pojo</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hjc.pojo;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;customer&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long custId;<span class="comment">//客户Id</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;cust_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String custName;<span class="comment">//客户名称</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;cust_address&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String custAddress;<span class="comment">//客户地址</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Customer&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;custId=&quot;</span> + custId +</span><br><span class="line">                <span class="string">&quot;, custName=&#x27;&quot;</span> + custName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, custAddress=&#x27;&quot;</span> + custAddress + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getCustId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> custId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCustId</span><span class="params">(Long custId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.custId = custId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCustName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> custName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCustName</span><span class="params">(String custName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.custName = custName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCustAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> custAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCustAddress</span><span class="params">(String custAddress)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.custAddress = custAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Customer</span><span class="params">(Long custId, String custName, String custAddress)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.custId = custId;</span><br><span class="line">        <span class="built_in">this</span>.custName = custName;</span><br><span class="line">        <span class="built_in">this</span>.custAddress = custAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Customer</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4、dao层（repositories）"><a href="#4、dao层（repositories）" class="headerlink" title="4、dao层（repositories）"></a>4、dao层（repositories）</h3><p>CustomerRepository.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hjc.repositories;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hjc.pojo.Customer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.repository.CrudRepository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CustomerRepository</span> <span class="keyword">extends</span> <span class="title class_">CrudRepository</span>&lt;Customer,Long&gt; &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5、spring配置文件"><a href="#5、spring配置文件" class="headerlink" title="5、spring配置文件"></a>5、spring配置文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:jpa</span>=<span class="string">&quot;http://www.springframework.org/schema/data/jpa&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/data/jpa</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/data/jpa/spring-jpa.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--用于整合jpa  @EnableJpaRepositories--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jpa:repositories</span> <span class="attr">base-package</span>=<span class="string">&quot;com.hjc.repositories&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">entity-manager-factory-ref</span>=<span class="string">&quot;entityManagerFactory&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">transaction-manager-ref</span>=<span class="string">&quot;jpaTransactionManager&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--entityManagerFactory--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;entityManagerFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jpaVendorAdapter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;generateDdl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;showSql&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置实体类的包--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;packagesToScan&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.hjc.pojo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置数据源  ref导入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--德鲁伊数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/springdata_jpa?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8<span class="symbol">&amp;amp;</span>zeroDateTimeBehavior=convertToNull<span class="symbol">&amp;amp;</span>useSSL=true<span class="symbol">&amp;amp;</span>serverTimezone=GMT%2B8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--声明式事务--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;jpaTransactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;entityManagerFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;entityManagerFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注解驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;jpaTransactionManager&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6、测试CRUD"><a href="#6、测试CRUD" class="headerlink" title="6、测试CRUD"></a>6、测试CRUD</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hjc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hjc.config.SpringDataJPAConfig;</span><br><span class="line"><span class="keyword">import</span> com.hjc.pojo.Customer;</span><br><span class="line"><span class="keyword">import</span> com.hjc.repositories.CustomerRepository;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:spring.xml&quot;)</span></span><br><span class="line"><span class="comment">//@ContextConfiguration(classes = SpringDataJPAConfig.class)</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">springdatajpatest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    CustomerRepository customerRepository;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//查</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mytest</span><span class="params">()</span>&#123;</span><br><span class="line">        Optional&lt;Customer&gt; byId = customerRepository.findById(<span class="number">1L</span>);</span><br><span class="line">        System.out.println(byId.get());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//增</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Customer</span> <span class="variable">customer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Customer</span>();</span><br><span class="line">        customer.setCustName(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">        customer.setCustAddress(<span class="string">&quot;kjahsdkanklsjdas&quot;</span>);</span><br><span class="line">        <span class="type">Customer</span> <span class="variable">save</span> <span class="operator">=</span> customerRepository.save(customer);</span><br><span class="line">        System.out.println(save);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//改</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Customer</span> <span class="variable">customer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Customer</span>();</span><br><span class="line">        customer.setCustId(<span class="number">2L</span>);</span><br><span class="line">        customer.setCustName(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        customer.setCustAddress(<span class="string">&quot;北京市海定区update&quot;</span>);</span><br><span class="line">        <span class="type">Customer</span> <span class="variable">save</span> <span class="operator">=</span> customerRepository.save(customer);</span><br><span class="line">        System.out.println(save);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        Iterable&lt;Customer&gt; all = customerRepository.findAll();</span><br><span class="line">        System.out.println(all);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>&#123;</span><br><span class="line">        customerRepository.deleteById(<span class="number">3L</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、javaConfig方式"><a href="#二、javaConfig方式" class="headerlink" title="二、javaConfig方式"></a>二、javaConfig方式</h2><p>同上至第四步</p>
<h3 id="4、Java配置文件"><a href="#4、Java配置文件" class="headerlink" title="4、Java配置文件"></a>4、Java配置文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hjc.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.config.EnableJpaRepositories;</span><br><span class="line"><span class="keyword">import</span> org.springframework.orm.jpa.JpaTransactionManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.PlatformTransactionManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.EntityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableJpaRepositories(basePackages = &quot;com.hjc.repositories&quot;)</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringDataJPAConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/springdata_jpa?useUnicode=true&amp;amp;characterEncoding=utf8&amp;amp;zeroDateTimeBehavior=convertToNull&amp;amp;useSSL=true&amp;amp;serverTimezone=GMT%2B8&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 方法名必须是entityManagerFactory()</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> LocalContainerEntityManagerFactoryBean <span class="title function_">entityManagerFactory</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">HibernateJpaVendorAdapter</span> <span class="variable">vendorAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HibernateJpaVendorAdapter</span>();</span><br><span class="line">        vendorAdapter.setGenerateDdl(<span class="literal">true</span>);</span><br><span class="line">        vendorAdapter.setShowSql(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">LocalContainerEntityManagerFactoryBean</span> <span class="variable">factoryBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LocalContainerEntityManagerFactoryBean</span>();</span><br><span class="line">        factoryBean.setJpaVendorAdapter(vendorAdapter);</span><br><span class="line">        factoryBean.setPackagesToScan(<span class="string">&quot;com.hjc.pojo&quot;</span>);</span><br><span class="line">        factoryBean.setDataSource(dataSource());</span><br><span class="line">        <span class="keyword">return</span> factoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PlatformTransactionManager <span class="title function_">transactionManager</span><span class="params">(EntityManagerFactory entityManagerFactory)</span>&#123;</span><br><span class="line">        <span class="type">JpaTransactionManager</span> <span class="variable">txManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JpaTransactionManager</span>();</span><br><span class="line">        txManager.setEntityManagerFactory(entityManagerFactory);</span><br><span class="line">        <span class="keyword">return</span> txManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5、测试"><a href="#5、测试" class="headerlink" title="5、测试"></a>5、测试</h3><p>代码不变，把类上的<code>@ContextConfiguration(&quot;classpath:spring.xml&quot;)</code></p>
<p>改成<code>@ContextConfiguration(classes = SpringDataJPAConfig.class)</code></p>
<p>即可</p>
<h2 id="三、项目结构截图："><a href="#三、项目结构截图：" class="headerlink" title="三、项目结构截图："></a>三、项目结构截图：</h2><p><img src="/../assets/1695644170139.png" alt="1695644170139"></p>
<h2 id="四、需要注意的问题，也是我出现了bug的地方"><a href="#四、需要注意的问题，也是我出现了bug的地方" class="headerlink" title="四、需要注意的问题，也是我出现了bug的地方"></a>四、需要注意的问题，也是我出现了bug的地方</h2><p>在Javaconfig配置方式中</p>
<p>方法名：<code>entityManagerFactory()</code>不能改变</p>
<p>方法名必须是<code>entityManagerFactory()</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/10/24/2023-10-24-SpringDataJpa%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="clo4h2l3j0007nso9fkm87kge" data-title="SpringDataJpa学习笔记" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2023-10-24-Thymeleaf实战指南" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/2023-10-24-Thymeleaf%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T04:12:12.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/2023-10-24-Thymeleaf%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/">Thymeleaf实战指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Thymeleaf实战指南"><a href="#Thymeleaf实战指南" class="headerlink" title="Thymeleaf实战指南"></a>Thymeleaf实战指南</h1><p>Thymeleaf是一种用于在Web应用中渲染动态内容的模板引擎。它提供了丰富的语法和功能，使开发人员能够轻松地在HTML模板中插入动态数据和逻辑处理。我们实训中用到的一些常用语法和示例写法给大家总结下：</p>
<h2 id="Thymeleaf与Spring-Boot集成步骤："><a href="#Thymeleaf与Spring-Boot集成步骤：" class="headerlink" title="Thymeleaf与Spring Boot集成步骤："></a>Thymeleaf与Spring Boot集成步骤：</h2><p>步骤1：在pom.xml中添加Thymeleaf和Spring Boot的依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Boot Starter Thymeleaf --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>步骤2：配置Thymeleaf相关属性，如模板前缀、后缀等。在application.properties或application.yml中添加如下配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Thymeleaf Configuration</span></span><br><span class="line"><span class="attr">spring.thymeleaf.prefix</span>=<span class="string">classpath:/templates/</span></span><br><span class="line"><span class="attr">spring.thymeleaf.suffix</span>=<span class="string">.html</span></span><br><span class="line"><span class="attr">spring.thymeleaf.mode</span>=<span class="string">HTML</span></span><br><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure>

<p>步骤3：创建Thymeleaf模板文件。在<code>src/main/resources/templates/</code>目录下创建HTML模板文件。</p>
<p>步骤4：创建Controller类，处理请求并返回Thymeleaf模板。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">home</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;Hello Thymeleaf!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>; <span class="comment">// 返回对应的Thymeleaf模板文件名</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>步骤5：在Thymeleaf模板中使用Thymeleaf的语法来渲染动态内容。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Thymeleaf Example<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;message&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Thymeleaf的常用语法"><a href="#Thymeleaf的常用语法" class="headerlink" title="Thymeleaf的常用语法"></a>Thymeleaf的常用语法</h2><ol>
<li><p>输出变量值：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;variable&#125;&quot;</span>&gt;</span>Default value<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这会将变量<code>$&#123;variable&#125;</code>的值输出到<code>&lt;p&gt;</code>标签中。</p>
</li>
<li><p>条件判断：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;condition&#125;&quot;</span>&gt;</span>Condition is true<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:unless</span>=<span class="string">&quot;$&#123;condition&#125;&quot;</span>&gt;</span>Condition is false<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当<code>$&#123;condition&#125;</code>为真时，第一个<code>&lt;p&gt;</code>标签将显示；当<code>$&#123;condition&#125;</code>为假时，第二个<code>&lt;p&gt;</code>标签将显示。</p>
</li>
<li><p>循环迭代：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:each</span>=<span class="string">&quot;item : $&#123;items&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;item&#125;&quot;</span>&gt;</span>Item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这会遍历<code>$&#123;items&#125;</code>列表，并为每个元素创建一个<code>&lt;li&gt;</code>标签。</p>
</li>
<li><p>表单处理：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/save&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这是一个简单的表单，将数据提交到<code>/save</code>路径。服务端的代码：</p>
</li>
</ol>
<p>后端代码，使用Spring MVC和Thymeleaf来处理表单提交：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@PostMapping(&quot;/save&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">saveForm</span><span class="params">(<span class="meta">@RequestParam(&quot;name&quot;)</span> String name)</span> &#123;</span><br><span class="line">    <span class="comment">// 处理表单提交的逻辑</span></span><br><span class="line">    <span class="comment">// 在这里可以对表单数据进行处理，如保存到数据库或进行其他操作</span></span><br><span class="line">    System.out.println(<span class="string">&quot;Received name: &quot;</span> + name);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 返回重定向或渲染的视图</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/success&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GetMapping(&quot;/success&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">showSuccessPage</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 显示提交成功页面</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>URL链接生成：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/users/&#123;id&#125;(id=$&#123;userId&#125;)&#125;&quot;</span>&gt;</span>User Details<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这会生成一个链接，其中<code>$&#123;userId&#125;</code>是动态的路径参数。</p>
</li>
<li><p>模板片段（Fragment）：</p>
<p>模板片段是一部分可以在多个页面中重用的HTML代码块。你可以将这些代码块提取出来，然后在不同的页面中引用它们。示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 定义模板片段 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome to My Website<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引用模板片段 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;fragments/header :: header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在以上示例中，<code>header</code>模板片段定义了一个标题，然后可以在其他页面中通过<code>th:replace</code>指令引用它。</p>
</li>
<li><p>国际化支持（Internationalization）：</p>
<p>Thymeleaf提供了简便的方式来处理国际化文本，以便在不同的语言环境下显示不同的内容。示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用国际化文本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">th:text</span>=<span class="string">&quot;#&#123;welcome.message&#125;&quot;</span>&gt;</span>Welcome<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在以上示例中，<code>#&#123;welcome.message&#125;</code>表示从国际化资源文件中获取名为<code>welcome.message</code>的文本，并将其显示在页面上。</p>
</li>
<li><p>片段缓存（Fragment Caching）：</p>
<p>片段缓存允许你缓存特定的HTML代码块，以提高页面的渲染性能。示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 缓存模板片段 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">&quot;header&quot;</span> <span class="attr">th:cacheable</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome to My Website<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在以上示例中，通过将<code>th:cacheable</code>属性设置为<code>true</code>，可以将<code>header</code>模板片段进行缓存，以便在后续请求中直接使用缓存的结果，提高页面的响应速度。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/10/24/2023-10-24-Thymeleaf%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/" data-id="clo4h2l3j0008nso9era778i4" data-title="Thymeleaf实战指南" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2023-10-24-Vue中 Runtime + Compiler 和 Runtime-only 两种模式含义和区别" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/10/24/2023-10-24-Vue%E4%B8%AD%20Runtime%20+%20Compiler%20%E5%92%8C%20Runtime-only%20%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F%E5%90%AB%E4%B9%89%E5%92%8C%E5%8C%BA%E5%88%AB/" class="article-date">
  <time class="dt-published" datetime="2023-10-24T04:12:12.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/10/24/2023-10-24-Vue%E4%B8%AD%20Runtime%20+%20Compiler%20%E5%92%8C%20Runtime-only%20%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F%E5%90%AB%E4%B9%89%E5%92%8C%E5%8C%BA%E5%88%AB/">Vue中 Runtime + Compiler 和 Runtime-only 两种模式含义和区别</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、问题描述"><a href="#一、问题描述" class="headerlink" title="一、问题描述"></a>一、问题描述</h2><p>在使用 vue-cli 脚手架构建项目时，会遇到一个构建选项 Vue build，有两个选择，Runtime + Compiler 和 Runtime-only ，如图所示</p>
<ol>
<li><img src="https://pic.imgdb.cn/item/6537c96cc458853aef50b990.jpg"></li>
</ol>
<p><strong>Runtime + Compiler</strong>: recommended for most users</p>
<p><strong>运行程序+编译器：推荐给大多数用户</strong></p>
<p><strong>Runtime-only</strong>: about 6KB lighter min+gzip, but templates (or any Vue-specific HTML) are ONLY allowed in .vue files - render functions are required elsewhere</p>
<p><strong>仅运行程序: 比上面那种模式轻大约 6KB，但是 template (或任何特定于vue的html)只允许在.vue文件中使用——其他地方用需要 render 函数</strong></p>
<h2 id="二、两种模式的区别"><a href="#二、两种模式的区别" class="headerlink" title="二、两种模式的区别"></a>二、两种模式的区别</h2><p>runtime-only 比 runtime-compiler 轻 6kb，代码量更少<br>runtime-only 运行更快，性能更好<br>runtime-only 其实只能识别render函数，不能识别template，.vue 文件中的template也是被 vue-template-compiler 翻译成了render函数，所以只能在.vue里写 template<br>有关vue中的render函数可以看这篇博客：vue中的render函数</p>
<h2 id="三、解释"><a href="#三、解释" class="headerlink" title="三、解释"></a>三、解释</h2><p>两种模式生成的 脚手架 即（代码模板）主要区别在 main.js 中，其它基本上是一样的：</p>
<p><img src="https://pic.imgdb.cn/item/6537c993c458853aef515e70.jpg"> </p>
<p>我们再看一张图：</p>
<p><img src="https://pic.imgdb.cn/item/6537c9a2c458853aef51974c.jpg"> </p>
<p><strong>runtime + compiler 中 Vue 的运行过程</strong></p>
<p>对于 runtime-compiler 来说，它的代码运行过程是：template -&gt; ast -&gt; render -&gt; virtual dom -&gt; UI</p>
<p>首先将vue中的template模板进行解析解析成abstract syntax tree （ast）抽象语法树<br>将抽象语法树在编译成render函数<br>将render函数再翻译成virtual dom（虚拟dom）<br>将虚拟dom显示在浏览器上<br><strong>runtime-only 中 Vue 的运行过程</strong></p>
<p>对于 runtime-only来说，它是从 render -&gt; virtual dom -&gt; UI</p>
<p>可以看出它省略了从template -&gt; ast -&gt; render的过程<br>所以runtime-only比runtime-compiler更快，代码量更少<br>runtime-only 模式中不是没有写 template ，只是把 template 放在了.vue 的文件中了，并有一个叫 vue-template-compiler 的开发依赖时将.vue文件中的 template 解析成 render 函数。 因为是开发依赖，不在最后生产中，所以最后生产出来的运行的代码没有template</p>
<h2 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h2><p>如果在之后的开发中，你依然使用template，就需要选择 <strong>Runtime + Compiler</strong></p>
<p>如果你之后的开发中，使用的是.vue文件夹开发，那么可以选择 <strong>Runtime-only</strong></p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43974265/article/details/112743656">https://blog.csdn.net/weixin_43974265/article/details/112743656</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://suyiharris.github.io/2023/10/24/2023-10-24-Vue%E4%B8%AD%20Runtime%20+%20Compiler%20%E5%92%8C%20Runtime-only%20%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F%E5%90%AB%E4%B9%89%E5%92%8C%E5%8C%BA%E5%88%AB/" data-id="clo4h2l3k0009nso96gm9hi9o" data-title="Vue中 Runtime + Compiler 和 Runtime-only 两种模式含义和区别" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/11/02/2023-11-2-Virbox%E4%BB%A3%E7%A0%81%E5%8A%A0%E5%AF%86/">-Virbox代码加密</a>
          </li>
        
          <li>
            <a href="/2023/10/24/2023-10-24-hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2023/10/24/2023-10-24-Git%E5%AD%A6%E4%B9%A0/">2023-10-24-Git学习</a>
          </li>
        
          <li>
            <a href="/2023/10/24/2023-10-24-Jwt%E7%9A%84%E9%89%B4%E6%9D%83%E7%99%BB%E5%BD%95-%E6%8B%A6%E6%88%AA%E5%99%A8-%E6%B3%A8%E5%86%8C%E6%8B%A6%E6%88%AA%E5%99%A8/">Jwt的鉴权登录-拦截器-注册拦截器</a>
          </li>
        
          <li>
            <a href="/2023/10/24/2023-10-24-Linux%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2SpringBoot%E9%A1%B9%E7%9B%AE/">Linux系统部署SpringBoot项目</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 SuYi<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>